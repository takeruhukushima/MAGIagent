### MAGI概念の全体像（MECEによる整理）

MAGIは、AI技術を安全かつ効果的に科学研究へ応用するために提案された概念であり、その思想、定義、構成要素、名称の由来の4つの側面から整理できます。

---

#### 1. 背景思想：なぜMAGIは提案されたか

* **AGI（汎用人工知能）への期待と懸念**
    * [cite_start]近年のAI・LLMの目覚ましい技術革新を研究開発に活用しないことは、大きな機会損失になりうるとの認識があります [cite: 22]。
    * [cite_start]一方で、完全な自律型AGI（人間レベルの認知能力で自律的に問題解決できるシステム）は、制御が効かなくなるリスクを内包していると指摘されています [cite: 62, 63]。
    * [cite_start]AIの安全性という観点からは、人間による監督の重要性が強調されています [cite: 63]。

* **MAGIの位置づけ**
    * [cite_start]これらの背景から、完全な自律性を目指すのではなく、人間の制御と監督を前提とした新しいシステムとして「MAGI」が提案されました [cite: 63, 65]。

#### 2. 定義と目的：MAGIとは何か

* **定義**
    * [cite_start]MAGIとは、原理が完全には解明されていないブラックボックスなもの（Black code）に対し、人間が「手」を加えて相互作用を起こし、原理の分かっているホワイトボックスなもの（White code）を生み出すシステムです [cite: 74]。

* **本研究における操作的定義**
    * [cite_start]本研究では、AGIを「自然現象との自律的相互作用により、継続的に知識を獲得・更新し、実験設計から結果解析まで24時間体制で実行可能なシステム」と定義しています [cite: 62][cite_start]。MAGIはこの概念に基づき、AIを用いたシミュレーションおよび実験を行うために用いられます [cite: 75]。

* **目的**
    * [cite_start]LLM（大規模言語モデル）を材料工学に応用し、その方法と可能性を探ることが目的です [cite: 78][cite_start]。具体的には、LLMを用いてスピノーダル現象やスパッタリングのシミュレーションを行います [cite: 78]。

#### 3. 構成要素とプロセス：どのように機能するか

* **構成要素**
    * [cite_start]**MANUS（人間）**: システムの「手」として、制御と監督を行います [cite: 65, 70]。
    * [cite_start]**Black code（ブラックボックス）**: 原理が完全には分かっていない対象（本研究ではLLMなどが該当） [cite: 74]。
    * [cite_start]**White code（ホワイトボックス）**: 人間の相互作用を通じて生み出される、原理が解明されたもの（例: 検証済みのシミュレーションコードなど） [cite: 74]。

* **プロセス**
    * [cite_start]人間（MANUS）がBlack codeとインタラクション（相互作用）することで、White codeを生成します [cite: 74]。

#### 4. 名称の由来：なぜ「MAGI」と呼ばれるか

* **ラテン語の「manus (手)」**
    * [cite_start]人間の「手」による制御・監督を重視する概念であることを示しています [cite: 65]。
* **キリスト教の「三賢者 (Magi)」**
    * [cite_start]知恵と慎重さの象徴として、その名から着想を得ています [cite: 65]。
-----

### **材料工学研究支援エージェント群（MAGI on ADK） 要件定義書**

#### 1\. 概要

本プロジェクトは、「MAGI（Manus Artificial General Intelligence）概念」を、GoogleのADK（Agent Development Kit）を用いて一連の協調型AIエージェントとして実装することを目的とする。
これらのエージェント群は、材料工学の研究プロセス（構想・計画、実行・実験、解析・考察）を支援し、人間（研究者）の監督のもとで研究活動を加速・高度化させる。

#### 2\. 全体アーキテクチャ

ADKのマルチエージェント思想に基づき、以下のアーキテクチャを採用する。

  * **Master Research Agent (統合研究エージェント):**

      * ユーザー（研究者）との統一された対話インターフェース（Frontdoor）として機能する。
      * ユーザーからの自然言語による指示を解釈し、タスクに応じて後述の専門エージェントを呼び出すオーケストレーターの役割を担う。

  * **Specialist(sub) Agents (専門エージェント群):**

      * 特定の研究フェーズに特化した能力を持つエージェント群。Master Research Agentからの指示を受けて、具体的なタスクを実行する。
          * **Planning Agent (構想・計画エージェント)**
          * **Execution Agent (実行・実験エージェント)**
          * **Analysis Agent (解析・考察エージェント)**
          * **KnowledgeBase Agent (研究基盤エージェント)**

#### 3\. エージェント別機能要件

##### 3.1. Master Research Agent (統合研究エージェント)

| 要件項目 | 内容 |
| :--- | :--- |
| **ユーザーインターフェース** | ユーザーからの自然言語による研究指示（例:「シラスガラスの先行研究を調査して」「SEM画像を解析して細孔径分布を求めて」）を受け付ける。 |
| **タスク解釈・委任** | ユーザーの指示を解釈し、内容に応じて適切な専門エージェント（Planning/Execution/Analysis）にタスクを委任する。 |
| **進捗管理と報告** | 各専門エージェントの処理状況を監視し、要所でユーザーに進捗を報告する。 |
| **結果の統合** | 各専門エージェントからの最終的なアウトプットを統合し、ユーザーに分かりやすい形で提示する。 |

##### 3.2. Planning Agent (構想・計画エージェント)

| 要件項目 | 内容 | 利用するADKツール（想定） |
| :--- | :--- | :--- |
| **文献調査** | 指定されたキーワードに基づき、外部の学術データベースを検索し、関連論文のリストと要約を生成する。 | `WebSearchTool`、`DocumentReaderTool`from google.adk.tools import google_search tools=[google_search] |
| **研究計画立案** | 研究目的（例: 細孔径マップ作成）に基づき、実験パラメータの組み合わせやシミュレーションの設計案を複数提示する。 | `PlanningTool`（カスタム） |
| **人間によるレビュー** | 生成した研究計画案の妥当性について、ユーザー（MANUS）にレビューと承認を求める。 | `HumanInTheLoopTool` |
| **アウトプット** | 承認された研究計画書（Markdown形式）、参考文献リストを生成し、Master Agentに返す。 | `FileSystemTool` |

ご指摘ありがとうございます。おっしゃる通り、材料工学の研究において物理的な実験は中心的な役割を担います。この点は非常に重要であり、私の提案がシミュレーションやデータ解析といった計算機上のタスクに偏っているというご意見は的を射ています。

現在の要件定義は、ご提供いただいた卒業研究のフロー、すなわち「RFマグネトロンスパッタリング装置の操作といった物理実験そのものは人間が行い、その結果得られたSEM画像をAIが解析する」という役割分担に焦点を当てていました。

ご指摘を踏まえ、`Execution Agent`が物理実験のプロセスにもっと深く関与し、シミュレーション（in silico）と実験（in situ / in vitro）の橋渡し役を担う形で、以下のように要件を拡張することを提案します。

---

### 「Execution Agent」の拡張提案

物理実験のプロセスを「**準備**」「**実行・記録**」「**データ連携**」の3つのステップに分け、それぞれを支援する機能を加えます。

1.  **実験準備の支援:**
    * **実験手順書（プロトコル）の生成:** 目的の薄膜を作成するための装置操作手順、薬品の調合方法、安全上の注意点などを網羅した手順書をAIが生成します。人間はそれをレビューし、承認することで、標準化された安全な実験が可能になります。

2.  **実験実行・記録の支援:**
    * **デジタル実験ノートとしての機能:** 研究者が「今から投入電力200W、圧力0.5Paで成膜を開始」と自然言語で入力すると、エージェントがタイムスタンプと共にその実験パラメータを自動で記録します。これにより、手作業による記録ミスや漏れを防ぎます。

3.  **実験データとの連携:**
    * **データと条件の自動紐付け:** 物理実験後に得られたデータファイル（例: SEM画像）をアップロードすると、エージェントが直前に記録した実験パラメータと自動で紐付けます。これにより、「どの条件下で得られたデータか」というトレーサビリティが完全に確保されます。

### 修正版：Execution Agent (実行・実験エージェント)の要件定義

これらの拡張を踏まえ、要件定義表を以下のように修正します。

| 要件項目 | 内容 | 利用するADKツール（想定） | 備考 |
| :--- | :--- | :--- | :--- |
| **実験プロトコル生成** | 安全上の注意点を含む、物理実験（成膜、エッチング等）の手順書草案を生成する。 | `DocumentGeneratorTool` | **【新規追加】** |
| **実験条件の記録** | ユーザーからの自然言語入力を基に、実験パラメータ（電力、圧力、時間など）をデジタル実験ノートに記録する。 | `LabNotebookTool`（カスタム） | **【新規追加】** |
| **コード生成** | 計画書に基づき、シミュレーションや**データ前処理**のためのPythonコードを生成する。 | `CodeInterpreterTool` | （変更なし） |
| **人間によるレビュー** | 生成された**実験プロトコル**や**コード**の妥当性と安全性をユーザー（MANUS）にレビューさせ、承認を得る。 | `HumanInTheLoopTool` | （対象を拡張） |
| **データ入力と紐付け** | ローカルからSEM画像等の実験データを読み込み、**記録済みの実験条件と自動で紐付ける**。 | `FileSystemTool`, `LabNotebookTool` | **【機能拡張】** |
| **コード実行とデータ生成** | 承認されたコードを実行し、シミュレーション結果や、**実験データの解析結果**（細孔径分布など）を生成する。 | `CodeInterpreterTool` | （変更なし） |
| **アウトプット** | 検証済みのソースコード、データ、ログ、**実験ノートの記録**を指定されたワークスペースに保存する。 | `FileSystemTool` | （対象を拡張） |

このように、シミュレーションと物理実験の両輪をエージェントがサポートし、両者から得られるデータを一元的に管理・紐付けることで、MAGIシステムは材料工学研究をより包括的に支援する、強力なパートナーとなり得ると考えます。

##### 3.4. Analysis Agent (解析・考察エージェント)

| 要件項目 | 内容 | 利用するADKツール（想定） |
| :--- | :--- | :--- |
| **データ可視化** | `Execution Agent`が生成した数値データを基に、ヒストグラム、ヒートマップなどのグラフを生成する。 | `CodeInterpreterTool` (matplotlib, seaborn) |
| **結果の解釈** | 可視化されたグラフの傾向を読み取り、物理的な解釈の仮説を複数生成する。その際、`KnowledgeBase Agent`に問い合わせ、関連する物理法則や過去の知見を参考にする。 | `KnowledgebaseTool`（カスタム） |
| **考察・執筆支援** | ユーザーとの対話を通じて考察を深め、研究レポートの「結果」および「考察」セクションの草稿をMarkdown形式で生成する。 | `ReportGeneratorTool`（カスタム） |
| **アウトプット** | 生成したグラフ画像（.png）、レポート草稿（.md）をMaster Agentに返す。 | `FileSystemTool` |

##### 3.5. KnowledgeBase Agent (研究基盤エージェント)

| 要件項目 | 内容 | 利用するADKツール（想定） |
| :--- | :--- | :--- |
| **知識の保存** | 他のエージェントが生成した検証済みの成果物（White code）であるコード、レポート、考察などを自動的にベクトル化し、知識ベースに保存する。 | `VectorDBTool` |
| **知識の検索** | 他のエージェント（主にAnalysis Agent）からの自然言語クエリに対し、関連性の高い情報を知識ベースから検索して提供する（RAG）。 | `VectorDBTool` |

#### 4\. 非機能要件

| 要件項目 | 内容 |
| :--- | :--- |
| **ユーザビリティ** | ・`adk web`によるGUIを提供し、研究者が直感的に操作できること。\<br\>・各エージェントの処理状況がリアルタイムでUIに表示されること。 |
| **信頼性・正確性** | ・「人間によるレビュー（Human-in-the-loop）」のステップを省略できない設計とすること。\<br\>・すべてのAIによる生成物（考察、コード等）には、その根拠となったデータや文献への参照を明記すること。 |
| **拡張性** | ・新しい解析手法やシミュレーションモデルを、新しいツールや専門エージェントとして容易に追加・連携できるプラグイン構造を持つこと。 |
| **セキュリティ** | ・エージェントによるファイル操作は、ユーザーが明示的に許可したワークスペースディレクトリ内に限定すること。 |

#### 5\. 想定技術スタック

  * **フレームワーク:** Google Agent Development Kit (ADK)
  * **言語:** Python 3.11+
  * **主要ライブラリ:**
      * **LLM連携:** `google-generativeai`
      * **データ処理:** `pandas`, `numpy`
      * **可視化:** `matplotlib`, `seaborn`
      * **専門分野:** `PoreSpy` (画像解析), `FiPy` (偏微分方程式ソルバー)
      * **知識ベース:** `ChromaDB` or `FAISS` (ローカルベクトルDB)